{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "8696f6af_4bcfa5f0",
        "filename": "media/libstagefright/Utils.cpp",
        "patchSetId": 5
      },
      "lineNbr": 1436,
      "author": {
        "id": 1047003
      },
      "writtenOn": "2023-09-02T15:31:07Z",
      "side": 1,
      "message": "Can the changes in this file be moved out to a separate CL, so that the base changes that add required constants in frameworks/av and frameworks/base can be merged independently.\n\nAlso, can you please share one mp4 file with vvc (with content that is distributable) so that CTS test can be added to ensure this new code is covered in the tests?",
      "revId": "8b6fbc2138909195a1eb892132b5a7f6addaa689",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "caac651b_b4d18671",
        "filename": "media/libstagefright/Utils.cpp",
        "patchSetId": 5
      },
      "lineNbr": 1436,
      "author": {
        "id": 1339029
      },
      "writtenOn": "2023-09-06T08:55:00Z",
      "side": 1,
      "message": "Hi, Google,\nTopic VVC removed.\nWe update mp4 file in\nhttps://partnerissuetracker.corp.google.com/issues/294963798\nPlease help to check. Thank you.",
      "parentUuid": "8696f6af_4bcfa5f0",
      "revId": "8b6fbc2138909195a1eb892132b5a7f6addaa689",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2af9c5a1_ac0b5a3a",
        "filename": "media/libstagefright/Utils.cpp",
        "patchSetId": 5
      },
      "lineNbr": 1436,
      "author": {
        "id": 1047003
      },
      "writtenOn": "2023-09-06T22:28:14Z",
      "side": 1,
      "message": "Can you please check again? I don\u0027t see mp4 file attached in the above bug.",
      "parentUuid": "caac651b_b4d18671",
      "revId": "8b6fbc2138909195a1eb892132b5a7f6addaa689",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "861a9f96_b27549b6",
        "filename": "media/libstagefright/Utils.cpp",
        "patchSetId": 5
      },
      "lineNbr": 1436,
      "author": {
        "id": 1339029
      },
      "writtenOn": "2023-10-13T07:02:24Z",
      "side": 1,
      "message": "Hi, Google,\nPlease help to check once more. Thank you.",
      "parentUuid": "2af9c5a1_ac0b5a3a",
      "revId": "8b6fbc2138909195a1eb892132b5a7f6addaa689",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2d90f6a2_1f73af06",
        "filename": "media/libstagefright/Utils.cpp",
        "patchSetId": 5
      },
      "lineNbr": 1453,
      "author": {
        "id": 1047003
      },
      "writtenOn": "2023-09-06T22:28:14Z",
      "side": 1,
      "message": "can you please add appropriate size checks to ensure there are enough bits available?\n\nRefer: kKeyHVCC for example.",
      "revId": "8b6fbc2138909195a1eb892132b5a7f6addaa689",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "51444445_cd2fad62",
        "filename": "media/libstagefright/Utils.cpp",
        "patchSetId": 5
      },
      "lineNbr": 1453,
      "author": {
        "id": 1339029
      },
      "writtenOn": "2023-10-13T07:02:24Z",
      "side": 1,
      "message": "Yes. We have checked the bits left.",
      "parentUuid": "2d90f6a2_1f73af06",
      "revId": "8b6fbc2138909195a1eb892132b5a7f6addaa689",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0ee4c425_b3c3356b",
        "filename": "media/libstagefright/Utils.cpp",
        "patchSetId": 5
      },
      "lineNbr": 1517,
      "author": {
        "id": 1047003
      },
      "writtenOn": "2023-09-06T22:28:14Z",
      "side": 1,
      "message": "need checks here to ensure there are enough bytes remaining in the source before calling copyNALUToABuffer()",
      "revId": "8b6fbc2138909195a1eb892132b5a7f6addaa689",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b2d51bc3_a8821b02",
        "filename": "media/libstagefright/Utils.cpp",
        "patchSetId": 5
      },
      "lineNbr": 1517,
      "author": {
        "id": 1339029
      },
      "writtenOn": "2023-10-13T07:02:24Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0ee4c425_b3c3356b",
      "revId": "8b6fbc2138909195a1eb892132b5a7f6addaa689",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6f82ac2b_0b2b1221",
        "filename": "media/libstagefright/Utils.cpp",
        "patchSetId": 5
      },
      "lineNbr": 1519,
      "author": {
        "id": 1047003
      },
      "writtenOn": "2023-09-06T22:28:14Z",
      "side": 1,
      "message": "nit: space before and after",
      "range": {
        "startLine": 1519,
        "startChar": 60,
        "endLine": 1519,
        "endChar": 61
      },
      "revId": "8b6fbc2138909195a1eb892132b5a7f6addaa689",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "dd580226_ac67ba45",
        "filename": "media/libstagefright/Utils.cpp",
        "patchSetId": 5
      },
      "lineNbr": 1519,
      "author": {
        "id": 1339029
      },
      "writtenOn": "2023-10-13T07:02:24Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6f82ac2b_0b2b1221",
      "range": {
        "startLine": 1519,
        "startChar": 60,
        "endLine": 1519,
        "endChar": 61
      },
      "revId": "8b6fbc2138909195a1eb892132b5a7f6addaa689",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "80d4b0c1_56d0a16a",
        "filename": "media/libstagefright/Utils.cpp",
        "patchSetId": 5
      },
      "lineNbr": 1529,
      "author": {
        "id": 1047003
      },
      "writtenOn": "2023-09-06T22:28:14Z",
      "side": 1,
      "message": "kKeyHVCC also sets HDR metadata and color aspects information.\n\nVVC also would need these.\n\nAlso, we will need to add support to parse profile and level information like hevc does.",
      "revId": "8b6fbc2138909195a1eb892132b5a7f6addaa689",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "27dde207_3ea107d0",
        "filename": "media/libstagefright/Utils.cpp",
        "patchSetId": 5
      },
      "lineNbr": 1529,
      "author": {
        "id": 1339029
      },
      "writtenOn": "2023-10-13T07:02:24Z",
      "side": 1,
      "message": "We didn\u0027t find any spec to parse that. Only the following description is seen now.\naligned(8) class VvcDecoderConfigurationRecord {\n\tbit(5) reserved \u003d \u002711111\u0027b;\n\tunsigned int(2) LengthSizeMinusOne;\n\tunsigned int(1) ptl_present_flag;\n\tif (ptl_present_flag) {\n\t\tunsigned int(9) ols_idx;\n\t\tunsigned int(3) num_sublayers;\n\t\tunsigned int(2) constant_frame_rate;\n\t\tunsigned int(2) chroma_format_idc;\n\t\tunsigned int(3) bit_depth_minus8;\n\t\tbit(5) reserved \u003d \u002711111\u0027b;\n\t\tVvcPTLRecord(num_sublayers) native_ptl;\n\t\tunsigned_int(16) max_picture_width;\n\t\tunsigned_int(16) max_picture_height;\n\t\tunsigned int(16) avg_frame_rate;\t}\n\tunsigned int(8) num_of_arrays;\n\tfor (j\u003d0; j \u003c num_of_arrays; j++) {\n\t\tunsigned int(1) array_completeness;\n\t\tbit(2) reserved \u003d 0;\n\t\tunsigned int(5) NAL_unit_type;\n\t\tif (NAL_unit_type !\u003d DCI_NUT  \u0026\u0026  NAL_unit_type !\u003d OPI_NUT)\n\t\t\tunsigned int(16) num_nalus;\n\t\tfor (i\u003d0; i\u003c num_nalus; i++) {\n\t\t\tunsigned int(16) nal_unit_length;\n\t\t\tbit(8*nal_unit_length) nal_unit;\n\t\t}\n\t}\n}",
      "parentUuid": "80d4b0c1_56d0a16a",
      "revId": "8b6fbc2138909195a1eb892132b5a7f6addaa689",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a58ebfda_4232da2d",
        "filename": "media/libstagefright/Utils.cpp",
        "patchSetId": 5
      },
      "lineNbr": 1529,
      "author": {
        "id": 1047003
      },
      "writtenOn": "2023-10-13T18:53:12Z",
      "side": 1,
      "message": "Even HEVC configuration record doesn\u0027t contain the color aspects in the hvcc box.\nIn case of HEVC, these values are parsed from SPS and populated here.\n\nSimilarly would it be possible to populate profile and level?\nWithout this extractor will not be signalling profile and level and that can lead some issues if a decoder supports only a select few profiles.",
      "parentUuid": "27dde207_3ea107d0",
      "revId": "8b6fbc2138909195a1eb892132b5a7f6addaa689",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "27e1d1af_e14aac5e",
        "filename": "media/libstagefright/Utils.cpp",
        "patchSetId": 5
      },
      "lineNbr": 1529,
      "author": {
        "id": 1339029
      },
      "writtenOn": "2024-01-05T09:40:08Z",
      "side": 1,
      "message": "We have confirmed the setting of HDR metadata and color aspects for VVC, and the majority of the code has been written. However, there is currently a lack of VVC MP4 bitstream containing SPS with VUI. Can you provide it for our verification?",
      "parentUuid": "a58ebfda_4232da2d",
      "revId": "8b6fbc2138909195a1eb892132b5a7f6addaa689",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2577ab33_676cb1b8",
        "filename": "media/libstagefright/Utils.cpp",
        "patchSetId": 5
      },
      "lineNbr": 1529,
      "author": {
        "id": 1047003
      },
      "writtenOn": "2024-01-05T20:40:34Z",
      "side": 1,
      "message": "I don\u0027t have any VVC clips to share.\nCan you please try generating some using the standard reference encoder?",
      "parentUuid": "27e1d1af_e14aac5e",
      "revId": "8b6fbc2138909195a1eb892132b5a7f6addaa689",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4e66a27e_9f5add77",
        "filename": "media/libstagefright/Utils.cpp",
        "patchSetId": 5
      },
      "lineNbr": 1529,
      "author": {
        "id": 1339029
      },
      "writtenOn": "2024-01-16T06:45:59Z",
      "side": 1,
      "message": "Hi, Google,\nAfter confirmation, we can\u0027t obtain the special VVC MP4 bitstream containing SPS with video usability information (VUI). It is understood that parsing VUI constitutes a special case. The support for VVC has already been included in this commit, enabling basic VVC stream playback. Could following ways should be OK?\n1. The possibility of addressing support for setting HDR metadata and color aspects for VVC at a later time when encountering a special case in the future is being considered.\n2. Alternatively, consideration could be given to submitting this to the MediaTek partner branch rather than submitting it to the Google main branch?",
      "parentUuid": "2577ab33_676cb1b8",
      "revId": "8b6fbc2138909195a1eb892132b5a7f6addaa689",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2c59e6db_60224d82",
        "filename": "media/libstagefright/Utils.cpp",
        "patchSetId": 5
      },
      "lineNbr": 1529,
      "author": {
        "id": 1546599
      },
      "writtenOn": "2024-01-16T23:08:47Z",
      "side": 1,
      "message": "I am fine with submitting this to MediaTek partner branch.\nOnce the changes are complete then it can be merged to the main branch.",
      "parentUuid": "4e66a27e_9f5add77",
      "revId": "8b6fbc2138909195a1eb892132b5a7f6addaa689",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6ce15fb3_76907003",
        "filename": "media/libstagefright/Utils.cpp",
        "patchSetId": 5
      },
      "lineNbr": 2189,
      "author": {
        "id": 1047003
      },
      "writtenOn": "2023-09-06T22:28:14Z",
      "side": 1,
      "message": "MEDIA_MIMETYPE_VIDEO_VVC",
      "range": {
        "startLine": 2189,
        "startChar": 27,
        "endLine": 2189,
        "endChar": 38
      },
      "revId": "8b6fbc2138909195a1eb892132b5a7f6addaa689",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "83f38273_89712afa",
        "filename": "media/libstagefright/Utils.cpp",
        "patchSetId": 5
      },
      "lineNbr": 2189,
      "author": {
        "id": 1339029
      },
      "writtenOn": "2023-10-13T07:02:24Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6ce15fb3_76907003",
      "range": {
        "startLine": 2189,
        "startChar": 27,
        "endLine": 2189,
        "endChar": 38
      },
      "revId": "8b6fbc2138909195a1eb892132b5a7f6addaa689",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8f29050d_71ec18ab",
        "filename": "media/libstagefright/Utils.cpp",
        "patchSetId": 5
      },
      "lineNbr": 2190,
      "author": {
        "id": 1047003
      },
      "writtenOn": "2023-09-06T22:28:14Z",
      "side": 1,
      "message": "avcc and hvcc above have a functions like reassembleHVCC and reassembleAVCC and use that data as csd-0.\nDo we need similar approach here for VVC?",
      "revId": "8b6fbc2138909195a1eb892132b5a7f6addaa689",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "24d6a4f5_a23b93b9",
        "filename": "media/libstagefright/Utils.cpp",
        "patchSetId": 5
      },
      "lineNbr": 2190,
      "author": {
        "id": 1339029
      },
      "writtenOn": "2023-10-13T07:02:24Z",
      "side": 1,
      "message": "That\u0027s for Encoding course. Currently no need to do that for VVC.",
      "parentUuid": "8f29050d_71ec18ab",
      "revId": "8b6fbc2138909195a1eb892132b5a7f6addaa689",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "10b95dbd_909fa928",
        "filename": "media/libstagefright/Utils.cpp",
        "patchSetId": 5
      },
      "lineNbr": 2190,
      "author": {
        "id": 1047003
      },
      "writtenOn": "2023-10-13T18:53:12Z",
      "side": 1,
      "message": "If the data is not being assembled like it is done for hevc and avc, then can you please remove these two lines here?\nThese two lines can be added here when reassembleVVCC is added.",
      "parentUuid": "24d6a4f5_a23b93b9",
      "revId": "8b6fbc2138909195a1eb892132b5a7f6addaa689",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "68f1ce1b_6682da0a",
        "filename": "media/libstagefright/Utils.cpp",
        "patchSetId": 5
      },
      "lineNbr": 2190,
      "author": {
        "id": 1339029
      },
      "writtenOn": "2024-01-25T11:09:25Z",
      "side": 1,
      "message": "Hi, Google,\nThough no need reassemble, but these two lines are needed.\nThe flow should be first Extractor AMessage transfer to meta(kKeyVVCC) in convertMessageToMetaData, then meta(kKeyVVCC) transfer to AMessage(MediaFormat) in convertMetaDataToMessage.",
      "parentUuid": "10b95dbd_909fa928",
      "revId": "8b6fbc2138909195a1eb892132b5a7f6addaa689",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}
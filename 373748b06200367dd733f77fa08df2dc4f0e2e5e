{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "f2a7db51_a1974234",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 6
      },
      "lineNbr": 339,
      "author": {
        "id": 1633017
      },
      "writtenOn": "2023-01-20T04:28:57Z",
      "side": 1,
      "message": "Michael,\nI am looking into ETSI TS 103 190-2 V1.2.1 (2018-02)\nhttps://www.etsi.org/deliver/etsi_ts/103100_103199/10319002/01.02.01_60/ts_10319002v010201p.pdf\n\nsection 4.6 suggests that,\n\"Decoders conforming to the present document shall be capable of decoding bitstreams where 0 ≤ bitstream_version\n≤ 2.\"\n\nThis seems like opposite to what this statement suggests. But somewhere else I remember reading supported bitstream \u003e\u003d 2.",
      "range": {
        "startLine": 339,
        "startChar": 8,
        "endLine": 339,
        "endChar": 75
      },
      "revId": "373748b06200367dd733f77fa08df2dc4f0e2e5e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "24736610_11f3fe8b",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 6
      },
      "lineNbr": 339,
      "author": {
        "id": 1281351
      },
      "writtenOn": "2023-01-23T00:54:35Z",
      "side": 1,
      "message": "Since AC-4 bitstreams with bitstream version \u003c 2 will not be used in practice, it doesn\u0027t add any value to support these in this implementation and hence we gate them here to avoid bloating the code. Generally these will be the versions of AC-4 bitstreams used in practice:\n\nac-4.02.01.00 // stereo\nac-4.02.01.01 // 5.1\nac-4.02.01.02 // Atmos CBI\nac-4.02.01.03 // Atmos CBI\nac-4.02.01.04 // Atmos Object\nac-4.02.02.00 // IMS\n\nWhere ac-4.xx.yy.zz represents bitstream version xx, presentation version yy and presentation level zz.",
      "parentUuid": "f2a7db51_a1974234",
      "range": {
        "startLine": 339,
        "startChar": 8,
        "endLine": 339,
        "endChar": 75
      },
      "revId": "373748b06200367dd733f77fa08df2dc4f0e2e5e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "471460e0_1a948c25",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 6
      },
      "lineNbr": 339,
      "author": {
        "id": 1633017
      },
      "writtenOn": "2023-01-23T01:04:47Z",
      "side": 1,
      "message": "But if we return ERROR_MALFORMED for bitstreamVersion \u003c\u003d 1, doesn\u0027t it break the existing behaviour. We would never support bitstreamVersion \u003c2 in this scenario.\nIs this the expectation?",
      "parentUuid": "24736610_11f3fe8b",
      "range": {
        "startLine": 339,
        "startChar": 8,
        "endLine": 339,
        "endChar": 75
      },
      "revId": "373748b06200367dd733f77fa08df2dc4f0e2e5e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "95553341_7b524dc7",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 6
      },
      "lineNbr": 339,
      "author": {
        "id": 1281351
      },
      "writtenOn": "2023-01-23T03:30:16Z",
      "side": 1,
      "message": "Yes, theoretically this is true but there are no real content of this version and no existing tests break as a result of this change. I think practically this is acceptable.",
      "parentUuid": "471460e0_1a948c25",
      "range": {
        "startLine": 339,
        "startChar": 8,
        "endLine": 339,
        "endChar": 75
      },
      "revId": "373748b06200367dd733f77fa08df2dc4f0e2e5e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9786ad58_5f78f7c6",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 6
      },
      "lineNbr": 339,
      "author": {
        "id": 1108919
      },
      "writtenOn": "2023-03-08T01:22:27Z",
      "side": 1,
      "message": "where are we documenting that bitstream version 0/1 are going to be unsupported.\nI\u0027m unwilling to have this be the only place that it is marked unsupported;\nIt needs to be documented, in what will end up in the API documentation\non developer.android.com, that we are only going to support bitstreamversion \u003e\u003d 2",
      "parentUuid": "95553341_7b524dc7",
      "range": {
        "startLine": 339,
        "startChar": 8,
        "endLine": 339,
        "endChar": 75
      },
      "revId": "373748b06200367dd733f77fa08df2dc4f0e2e5e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0e1743e8_78cf6940",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 6
      },
      "lineNbr": 356,
      "author": {
        "id": 1633017
      },
      "writtenOn": "2023-01-20T04:28:57Z",
      "side": 1,
      "message": "run stylecheck here? I think the standard style is 2 spaces before the comment starts.",
      "range": {
        "startLine": 356,
        "startChar": 21,
        "endLine": 356,
        "endChar": 24
      },
      "revId": "373748b06200367dd733f77fa08df2dc4f0e2e5e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5e873487_643f30dc",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 6
      },
      "lineNbr": 356,
      "author": {
        "id": 1281351
      },
      "writtenOn": "2023-01-23T00:54:35Z",
      "side": 1,
      "message": "I think the rule is \u003e\u003d 2 spaces. I will run cppcheck over the file to ensure I am not introducing any style issues.",
      "parentUuid": "0e1743e8_78cf6940",
      "range": {
        "startLine": 356,
        "startChar": 21,
        "endLine": 356,
        "endChar": 24
      },
      "revId": "373748b06200367dd733f77fa08df2dc4f0e2e5e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "47803d13_1152e54d",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 6
      },
      "lineNbr": 356,
      "author": {
        "id": 1633017
      },
      "writtenOn": "2023-01-23T01:04:47Z",
      "side": 1,
      "message": "I remember seeing the warning with \u003e2 spaces. If you see this file overall for such comments, I think all comments has that 2 spacing style.",
      "parentUuid": "5e873487_643f30dc",
      "range": {
        "startLine": 356,
        "startChar": 21,
        "endLine": 356,
        "endChar": 24
      },
      "revId": "373748b06200367dd733f77fa08df2dc4f0e2e5e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "00767dfe_1be6a7e1",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 6
      },
      "lineNbr": 359,
      "author": {
        "id": 1633017
      },
      "writtenOn": "2023-01-20T04:28:57Z",
      "side": 1,
      "message": "assert to check if singlePresenttaoin is 0?\nnumPresentations should be 1 only if singlePresentation\u003d\u003d1.",
      "range": {
        "startLine": 358,
        "startChar": 4,
        "endLine": 359,
        "endChar": 34
      },
      "revId": "373748b06200367dd733f77fa08df2dc4f0e2e5e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cdee51d9_5a43199f",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 6
      },
      "lineNbr": 359,
      "author": {
        "id": 1281351
      },
      "writtenOn": "2023-01-23T00:54:35Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "00767dfe_1be6a7e1",
      "range": {
        "startLine": 358,
        "startChar": 4,
        "endLine": 359,
        "endChar": 34
      },
      "revId": "373748b06200367dd733f77fa08df2dc4f0e2e5e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "97352e63_c2f1ceef",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 6
      },
      "lineNbr": 360,
      "author": {
        "id": 1633017
      },
      "writtenOn": "2023-01-20T04:28:57Z",
      "side": 1,
      "message": "#Minor. Comment with the style:\n\nb prefix is used while parsing 1 bit but the type is defined as uint32.\n    uint32_t bWaitFrames \u003d bits.getBits(1);\n    if (bWaitFrames) {\n    \n    \nwhereas the new code has mixed variable style: singlePresentation/isPayloadBase/hasProgramId with type as boolean.\n\nShould we follow common convention.",
      "range": {
        "startLine": 360,
        "startChar": 9,
        "endLine": 360,
        "endChar": 27
      },
      "revId": "373748b06200367dd733f77fa08df2dc4f0e2e5e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2e4ce2a0_28de67ab",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 6
      },
      "lineNbr": 360,
      "author": {
        "id": 1281351
      },
      "writtenOn": "2023-01-23T00:54:35Z",
      "side": 1,
      "message": "Using bool for these variables is more appropriate from a type safety point of view but I won\u0027t be going back to fix prior code in this CL.",
      "parentUuid": "97352e63_c2f1ceef",
      "range": {
        "startLine": 360,
        "startChar": 9,
        "endLine": 360,
        "endChar": 27
      },
      "revId": "373748b06200367dd733f77fa08df2dc4f0e2e5e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c755444a_d63c80f7",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 6
      },
      "lineNbr": 360,
      "author": {
        "id": 1633017
      },
      "writtenOn": "2023-01-23T01:04:47Z",
      "side": 1,
      "message": "I agree. I think we tried to bring this same logic in last time, but I guess the comment was not to mix the bool/int.\nAnyways we can push it and see what Google engineers think.",
      "parentUuid": "2e4ce2a0_28de67ab",
      "range": {
        "startLine": 360,
        "startChar": 9,
        "endLine": 360,
        "endChar": 27
      },
      "revId": "373748b06200367dd733f77fa08df2dc4f0e2e5e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "86a7d004_057054df",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 6
      },
      "lineNbr": 397,
      "author": {
        "id": 1633017
      },
      "writtenOn": "2023-01-20T04:28:57Z",
      "side": 1,
      "message": "Is this scoping required?",
      "range": {
        "startLine": 397,
        "startChar": 4,
        "endLine": 397,
        "endChar": 5
      },
      "revId": "373748b06200367dd733f77fa08df2dc4f0e2e5e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "63738738_b5c7ff08",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 6
      },
      "lineNbr": 397,
      "author": {
        "id": 1281351
      },
      "writtenOn": "2023-01-23T00:54:35Z",
      "side": 1,
      "message": "Scoping here is to highlight that we are only considering the first presentation but that there could be more presentations present as indicated by the comment above.",
      "parentUuid": "86a7d004_057054df",
      "range": {
        "startLine": 397,
        "startChar": 4,
        "endLine": 397,
        "endChar": 5
      },
      "revId": "373748b06200367dd733f77fa08df2dc4f0e2e5e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d804cbfe_e5df75b2",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 6
      },
      "lineNbr": 397,
      "author": {
        "id": 1633017
      },
      "writtenOn": "2023-01-23T04:04:51Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "63738738_b5c7ff08",
      "range": {
        "startLine": 397,
        "startChar": 4,
        "endLine": 397,
        "endChar": 5
      },
      "revId": "373748b06200367dd733f77fa08df2dc4f0e2e5e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2acc875b_1be65c10",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 6
      },
      "lineNbr": 418,
      "author": {
        "id": 1633017
      },
      "writtenOn": "2023-01-20T04:28:57Z",
      "side": 1,
      "message": "Line number 338 should have already gated this check.",
      "range": {
        "startLine": 418,
        "startChar": 12,
        "endLine": 418,
        "endChar": 31
      },
      "revId": "373748b06200367dd733f77fa08df2dc4f0e2e5e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b94a079f_b4b1db98",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 6
      },
      "lineNbr": 418,
      "author": {
        "id": 1281351
      },
      "writtenOn": "2023-01-23T00:54:35Z",
      "side": 1,
      "message": "That\u0027s true, but probably doesn\u0027t hurt to check it within this context.",
      "parentUuid": "2acc875b_1be65c10",
      "range": {
        "startLine": 418,
        "startChar": 12,
        "endLine": 418,
        "endChar": 31
      },
      "revId": "373748b06200367dd733f77fa08df2dc4f0e2e5e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7a103116_fcf1c890",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 6
      },
      "lineNbr": 418,
      "author": {
        "id": 1633017
      },
      "writtenOn": "2023-01-23T04:04:51Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "b94a079f_b4b1db98",
      "range": {
        "startLine": 418,
        "startChar": 12,
        "endLine": 418,
        "endChar": 31
      },
      "revId": "373748b06200367dd733f77fa08df2dc4f0e2e5e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "31c7b52a_c6683970",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 6
      },
      "lineNbr": 426,
      "author": {
        "id": 1633017
      },
      "writtenOn": "2023-01-20T04:28:57Z",
      "side": 1,
      "message": "Michael,\nI have looked into the spec and don\u0027t find the reason for below style of mimetype reporting described. Where can I find this information?",
      "range": {
        "startLine": 426,
        "startChar": 8,
        "endLine": 426,
        "endChar": 31
      },
      "revId": "373748b06200367dd733f77fa08df2dc4f0e2e5e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d562e6c7_920de4c5",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 6
      },
      "lineNbr": 426,
      "author": {
        "id": 1281351
      },
      "writtenOn": "2023-01-23T00:54:35Z",
      "side": 1,
      "message": "If you mean the codecs string, this is based on the format used in the IANA registration of AC-4 MIME type.",
      "parentUuid": "31c7b52a_c6683970",
      "range": {
        "startLine": 426,
        "startChar": 8,
        "endLine": 426,
        "endChar": 31
      },
      "revId": "373748b06200367dd733f77fa08df2dc4f0e2e5e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7ffe0a7a_69572cdf",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 6
      },
      "lineNbr": 426,
      "author": {
        "id": 1633017
      },
      "writtenOn": "2023-01-23T04:04:51Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "d562e6c7_920de4c5",
      "range": {
        "startLine": 426,
        "startChar": 8,
        "endLine": 426,
        "endChar": 31
      },
      "revId": "373748b06200367dd733f77fa08df2dc4f0e2e5e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3da7ab2c_636e0b51",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 6
      },
      "lineNbr": 429,
      "author": {
        "id": 1604644
      },
      "writtenOn": "2023-01-20T05:45:08Z",
      "side": 1,
      "message": "I checked the ExoPlayer test code. It seems that there is \"codecs\u003d\" in this string. For example, in MediaFormatUtilTest.java\n  @Test\n  public void createMediaFormatFromFormat_withPopulatedFormat_generatesExpectedEntries() {\n    Format format \u003d\n        new Format.Builder()\n            .setAverageBitrate(1)\n            .setChannelCount(2)\n            .setColorInfo(\n                new ColorInfo(\n                    /* colorSpace\u003d */ C.COLOR_SPACE_BT601,\n                    /* colorRange\u003d */ C.COLOR_RANGE_FULL,\n                    /* colorTransfer\u003d */ C.COLOR_TRANSFER_HLG,\n                    new byte[] {3}))\n            .setSampleMimeType(MimeTypes.VIDEO_H264)\n            .setCodecs(\"avc.123\")    // !!!!!! This line\n            .setFrameRate(4)\n......\n    assertThat(mediaFormat.getString(MediaFormat.KEY_CODECS_STRING)).isEqualTo(format.codecs);\n    \nAnother example is in OnDel MPEG-DASH .mpd file,\n      \u003cRepresentation audioSamplingRate\u003d\"48000\" bandwidth\u003d\"68368\" codecs\u003d\"ac-4.02.01.00\" id\u003d\"2\"\u003e            \nSo I think \"codecs\u003d\" should be removed.",
      "range": {
        "startLine": 429,
        "startChar": 60,
        "endLine": 429,
        "endChar": 67
      },
      "revId": "373748b06200367dd733f77fa08df2dc4f0e2e5e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "71f7a675_af881049",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 6
      },
      "lineNbr": 429,
      "author": {
        "id": 1604644
      },
      "writtenOn": "2023-01-20T06:41:32Z",
      "side": 1,
      "message": "The ExoPlayer code is here: https://github.com/google/ExoPlayer/blob/release-v2/library/common/src/test/java/com/google/android/exoplayer2/util/MediaFormatUtilTest.java#L74\nand\nhttps://github.com/google/ExoPlayer/blob/release-v2/library/common/src/test/java/com/google/android/exoplayer2/util/MediaFormatUtilTest.java#L107\n\nOne more example is \nhttps://github.com/google/ExoPlayer/blob/release-v2/library/common/src/main/java/com/google/android/exoplayer2/Format.java#L1345\nIt indicates \"codecs\u003d\" will be added for log output. That is to say, the original format.codecs doesn\u0027t has \"codecs\u003d\" prefix.",
      "parentUuid": "3da7ab2c_636e0b51",
      "range": {
        "startLine": 429,
        "startChar": 60,
        "endLine": 429,
        "endChar": 67
      },
      "revId": "373748b06200367dd733f77fa08df2dc4f0e2e5e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "85ee07bd_8d3c1d1d",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 6
      },
      "lineNbr": 429,
      "author": {
        "id": 1281351
      },
      "writtenOn": "2023-01-23T00:54:35Z",
      "side": 1,
      "message": "Thanks for the details Yanning. I will remove the \"codecs\u003d\" prefix.",
      "parentUuid": "71f7a675_af881049",
      "range": {
        "startLine": 429,
        "startChar": 60,
        "endLine": 429,
        "endChar": 67
      },
      "revId": "373748b06200367dd733f77fa08df2dc4f0e2e5e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}